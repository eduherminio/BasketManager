# BasketManager

BasketManager is a PoC solution for managing items of basket from an online store. It consists on:

* `BasketManager`: .NET Standard 2.0 library to handle business logic.

* `BasketManager.Api`: .NET Core 2.2 WebApi that allows accessing `BasketManager` functionality through REST controllers. This is the app you'd like to run to test the code (`dotnet build` and `dotnet run` is enough!).

* `BasketManager.Api.Client`: .NET Standard 2.0 library that serves as C# client of `BasketManager.Api`. Client's code is autogenerated, and wrappers around that autogenerate code are provided by the library.

* `Configuration`: General-purpose .NET Standard 2.0 library that hosts most of the configuration used in `BasketManager` and `BasketManager.Api` projects, allowing it to be reused by future projects.

## Technical specs and details

### Design

`BasketManager` has been implemented using a service layer, which acts as library interface, and a DB layer, whose implementation is mocked for this PoC.

`BasketManager.Api` uses that service layer interface for REST communication, but other technologies could be used instead.

### Swagger documentation & client generation

REST APIs OpenApi specification is automatically generated on build and copied to `AutoGeneratedFilesBySwagger` dir using [Swashbuckle.AspNetCore](https://github.com/domaindrivendev/Swashbuckle.AspNetCore).

When `BasketManager.Api` project is running, API documentation it can be accessed in `<project_uri>/swagger/index.html` (https://localhost:8001/swagger/index.html by default, configurable in (`appsettings.json`) file. That page can be used to test the api too (remember logging in first and setting `Bearer <token_obtained_from_login>` in Authorize button!).

C# clients are automatically generated from that OpenApi specification using [NSwag](https://github.com/RSuter/NSwag) and copied to `BasketManager.Api.Client` project, where they're used by hand-written wrappers. This way, if autogenerated code changes, only those wrappers would need to be changed and library maintainer would notice most breaking changes as they would produce compilation errors.

### Aspects

[AspectCore](https://github.com/AspectCore) has been used to implement some aspects, useful for exception handling and logging.

### Logging

Logs are provided by [NLog](https://github.com/NLog/NLog).

Errors, api requests, service's method invocations and database logs are stored in different log files.

### Authentication

Basic authentication is provided by [JWT](https://jwt.io/).
